<!-- item is a primitive value -->
<span *ngIf="isPrimitive(item); else arrayBlock">
    <lib-form-primitive-input [value]="item" (valueChange)="onItemChange($event)"></lib-form-primitive-input>
</span>

<!-- item is an array -->
<ng-template #arrayBlock>
    <ul *ngIf="isArray(item); else objectBlock">
        <li *ngFor="let arrayItem of item">
            <lib-form-item [item]="arrayItem"></lib-form-item>
        </li>
    </ul>
</ng-template>

<!-- item is a child object -->
<ng-template #objectBlock>
    <ng-container *ngIf="customTypeOf(item, 'object')">
        <div *ngFor="let keyVal of item | objectKeyValue; trackBy: propTrackByFn">
            {{keyVal.key}}:
            <lib-form-item [item]="keyVal.value" (itemChange)="onItemPropChange(keyVal.key, $event)"></lib-form-item>
        </div>
    </ng-container>
</ng-template>